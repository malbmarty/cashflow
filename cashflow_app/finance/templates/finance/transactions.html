{% extends 'finance/base.html' %}
{% load static %}

{% block title %}Главная - Управление транзакциями{% endblock %}

{% block extra_head %}
{% load static %}

{% endblock %}

{% block content %}
{% load static %}
<h1>Таблица транзакций</h1>

<div class="filters">
    <h3>Фильтры</h3>
    <form id="filterForm">
        <div style="display: grid; grid-template-columns: repeat(3, 2fr); gap: 10px;">
            <div class="form-group">
                <label>Дата от:</label>
                <input type="date" name="date_from" id="date_from">
            </div>
            <div class="form-group">
                <label>Дата до:</label>
                <input type="date" name="date_to" id="date_to">
            </div>
            <div class="form-group">
                <label>Статус:</label>
                <select name="status" id="statusFilter">
                    <option value="">Все</option>
                    {% for status in statuses %}
                    <option value="{{ status.id }}">{{ status.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Тип:</label>
                <select name="transaction_type" id="transaction_type">
                    <option value="">Все</option>
                    {% for type in types %}
                    <option value="{{ type.id }}">{{ type.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Категория:</label>
                <select name="category" id="categoryFilter">
                    <option value="">Все</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Подкатегория:</label>
                <select name="subcategory" id="subcategoryFilter">
                    <option value="">Все</option>
                    {% for subcategory in subcategories %}
                    <option value="{{ subcategory.id }}">{{ subcategory.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <button type="button" onclick="applyFilters()">Применить фильтры</button>
        <button type="button" onclick="clearFilters()">Очистить</button>
    </form>
</div>

<div id="transactionsTable">
    <table>
        <thead>
            <tr>
                <th>Дата</th>
                <th>Статус</th>
                <th>Тип</th>
                <th>Категория</th>
                <th>Подкатегория</th>
                <th>Сумма</th>
                <th>Комментарий</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody id="transactionsBody">
            <!-- Данные будут загружены через JavaScript -->
        </tbody>
    </table>
</div>
<script src="{% static 'js/transactions.js' %}"></script>
{% endblock %}