{% extends 'finance/base.html' %}

{% block title %}Создание записи - Управление транзакциями{% endblock %}

{% block content %}
{% load static %}
<h1>Создание новой записи</h1>

<form id="transactionForm">
    {% csrf_token %}
    
    <div class="form-group">
        <label>Дата:</label>
        <input type="date" name="date" id = "currentDate" required>
    </div>

    <div class="form-group">
        <label>Статус:</label>
        <select name="status" required>
            {% for status in statuses %}
            <option value="{{ status.id }}">{{ status.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Тип операции:</label>
        <select name="transaction_type" id="transactionType" onchange="loadCategories()" required>
            <option value="">Выберите тип</option>
            {% for type in types %}
            <option value="{{ type.id }}">{{ type.name }}</option>
            {% endfor %}
        </select>
    </div>

   <div class="form-group">
        <label>Категория:</label>
        <select name="category" id="category" required 
                onchange="loadSubcategories()">
            <option value="">Сначала выберите тип</option>
        </select>
    </div>

    <div class="form-group">
        <label>Подкатегория:</label>
        <select name="subcategory" id="subcategory" required>
            <option value="">Сначала выберите категорию</option>
        </select>
    </div>


    <div class="form-group">
        <label>Сумма:</label>
        <input type="number" name="amount" step="0.01" required>
    </div>

    <div class="form-group">
        <label>Комментарий:</label>
        <textarea name="comment" rows="3"></textarea>
    </div>

    <button type="submit">Создать запись</button>
</form>

<script src="{% static 'js/create_transaction.js' %}"></script>
{% endblock %}